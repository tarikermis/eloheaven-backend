import { rateLimit } from 'express-rate-limit';
const allowlist = [
  '127.0.0.1',
  '172.67.72.158',
  '104.26.2.140',
  '104.26.3.140',
  '2606:4700:20::681a:28c',
  '2606:4700:20::681a:38c',
  '2606:4700:20::ac43:489e',
  'localhost',
  '103.21.244.0/22',
  '103.22.200.0/22',
  '103.31.4.0/22',
  '104.16.0.0/13',
  '104.24.0.0/14',
  '108.162.192.0/18',
  '131.0.72.0/22',
  '141.101.64.0/18',
  '162.158.0.0/15',
  '172.64.0.0/13',
  '173.245.48.0/20',
  '188.114.96.0/20',
  '190.93.240.0/20',
  '197.234.240.0/22',
  '198.41.128.0/17',
  '2400:cb00::/32',
  '2405:8100::/32',
  '2405:b500::/32',
  '2606:4700::/32',
  '2803:f800::/32',
  '2a06:98c0::/29',
  '2c0f:f248::/32',
  '159.89.224.202',
  '3.18.12.63',
  '3.130.192.231',
  '13.235.14.237',
  '13.235.122.149',
  '18.211.135.69',
  '35.154.171.200',
  '52.15.183.38',
  '54.88.130.119',
  '54.88.130.237',
  '54.187.174.169',
  '54.187.205.235',
  '54.187.216.72',
  '54.175.255.192',
  '54.175.255.193',
  '54.175.255.194',
  '54.175.255.195',
  '54.175.255.196',
  '54.175.255.197',
  '54.175.255.198',
  '54.175.255.199',
  '54.175.255.200',
  '54.175.255.201',
  '54.175.255.202',
  '54.175.255.203',
  '54.175.255.204',
  '54.175.255.205',
  '54.175.255.206',
  '54.175.255.207',
  '54.175.255.208',
  '54.175.255.209',
  '54.175.255.210',
  '54.175.255.211',
  '54.175.255.212',
  '54.175.255.213',
  '54.175.255.214',
  '54.175.255.215',
  '54.175.255.216',
  '54.175.255.217',
  '54.175.255.218',
  '54.175.255.219',
  '54.175.255.220',
  '54.175.255.221',
  '54.175.255.222',
  '54.175.255.223',
  '3.130.192.231',
  '13.235.14.237',
  '13.235.122.149',
  '18.211.135.69',
  '35.154.171.200',
  '52.15.183.38',
  '54.88.130.119',
  '54.88.130.237',
  '54.187.174.169',
  '54.187.205.235',
  '54.187.216.72',
  '78.177.255.190',
  '78.183.191.26',
  '95.65.211.218',
];
const dev = process.env.BASE_DOMAIN !== 'https://eloheaven.gg';
console.log('dev', dev);
export const authLimiter = rateLimit({
  windowMs: 10 * 60 * 1000, // 10 minutes
  max: dev ? 10000000000000000 : 100,
  message: 'Too many auth requests',
});

export const websocketLimiter = rateLimit({
  windowMs: 10 * 60 * 1000, // 10 minutes
  max: dev ? 10000000000000000 : 10000,
  skip: (req, res) => (req.ip ? allowlist.includes(req.ip) : false),
  message: 'Too many ws requests',
});

export const apiLimiter = rateLimit({
  windowMs: 10 * 60 * 1000, // 10 minutes
  max: dev ? 10000000000000000 : 1000,
  message: 'Too many api requests',
});

export const highRateLimiter = rateLimit({
  windowMs: 10 * 60 * 1000, // 10 minutes
  max: dev ? 10000000000000000 : 100000,
  message: 'Too many other requests',
});
